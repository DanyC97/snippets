

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>17.1. Basic structure &mdash; Snippets 1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon-penn.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Snippets 1 documentation" href="../index.html"/>
        <link rel="up" title="17. awk-tutorial" href="index.html"/>
        <link rel="next" title="17.2. The Essential Syntax of AWK" href="awk-essential-syntax.html"/>
        <link rel="prev" title="17. awk-tutorial" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Snippets
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../cs-bash-commands.html">1. bash-commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-bash-scripts.html">2. bash-scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-python.html">3. Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-sphinx.html">4. sphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-R.html">5. R</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-awk-oneliners.html">6. awk-oneliners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-perl-oneliners.html">7. perl one-liners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-py-jupyter-notebook.html">8. python-jupyter-notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-qsubber.html">9. qsubber</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-regexp.html">10. regular expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-rst.html">11. rst</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-rst-old.html">12. rst cheatsheet (old)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-sed-oneliners.html">13. sed oneliners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-sed.html">14. sed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-sql.html">15. sql</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cs-scala.html">16. Scala</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">17. awk-tutorial</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">17.1. Basic structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk-essential-syntax.html">17.2. The Essential Syntax of AWK</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk-summary-commands.html">17.3. Summary of AWK Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="awk-builtin-vars.html">17.4. AWK Built-in Variables</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Snippets</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">17. awk-tutorial</a> &raquo;</li>
        
      <li>17.1. Basic structure</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/awk-tutorial/awk-basic-structure.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basic-structure">
<h1>17.1. Basic structure<a class="headerlink" href="#basic-structure" title="Permalink to this headline">Â¶</a></h1>
<p>The essential organization of an AWK program follows the form:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>pattern <span class="o">{</span> action <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>The pattern specifies when the action is performed. Like most UNIX utilities, AWK is line oriented. That is, the pattern specifies a test that is performed with each line read as input. If the condition is true, then the action is taken. The default pattern is something that matches every line. This is the blank or null pattern. Two other important patterns are specified by the keywords &#8220;BEGIN&#8221; and &#8220;END&#8221;. As you might expect, these two words specify actions to be taken before any lines are read, and after the last line is read. The AWK program below:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>BEGIN <span class="o">{</span> print <span class="s2">&quot;START&quot;</span> <span class="o">}</span>
      <span class="o">{</span> print         <span class="o">}</span>
END   <span class="o">{</span> print <span class="s2">&quot;STOP&quot;</span>  <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>adds one line before and one line after the input file. This isn&#8217;t very useful, but with a simple change, we can make this into a typical AWK program:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span>BEGIN <span class="o">{</span> print <span class="s2">&quot;File\tOwner&quot;</span><span class="o">}</span>
<span class="o">{</span> print <span class="nv">$8</span>, <span class="s2">&quot;\t&quot;</span>, <span class="nv">$3</span><span class="o">}</span>
END <span class="o">{</span> print <span class="s2">&quot; - DONE -&quot;</span> <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>I&#8217;ll improve the script in the next sections, but we&#8217;ll call it &#8220;FileOwner&#8221;. But let&#8217;s not put it into a script or file yet. I will cover that part in a bit. Hang on and follow with me so you get the flavor of AWK.</p>
<p>The characters &#8220;t&#8221; Indicates a tab character so the output lines up on even boundries. The &#8220;$8&#8221; and &#8220;$3&#8221; have a meaning similar to a shell script. Instead of the eighth and third argument, they mean the eighth and third field of the input line. You can think of a field as a column, and the action you specify operates on each line or row read in.</p>
<p>There are two differences between AWK and a shell processing the characters within double quotes. AWK understands special characters follow the &#8220;&#8221; character like &#8220;t&#8221;. The Bourne and C UNIX shells do not. Also, unlike the shell (and PERL) AWK does not evaluate variables within strings. To explain, the second line could not be written like this:</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">{</span>print <span class="s2">&quot;</span><span class="nv">$8</span><span class="s2">\t</span><span class="nv">$3</span><span class="s2">&quot;</span> <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>That example would print &#8220;$8 $3&#8221;. Inside the quotes, the dollar sign is not a special character. Outside, it corresponds to a field. What do I mean by the third and eight field? Consider the Solaris &#8220;/usr/bin/ls -l&#8221; command, which has eight columns of information. The System V version (Similar to the Linux version), &#8220;/usr/5bin/ls -l&#8221; has 9 columns. The third column is the owner, and the eighth (or nineth) column in the name of the file. This AWK program can be used to process the output of the &#8220;ls -l&#8221; command, printing out the filename, then the owner, for each file. I&#8217;ll show you how.</p>
<p>Update: On a linux system, change &#8220;$8&#8221; to &#8220;$9&#8221;.</p>
<p>One more point about the use of a dollar sign. In scripting languages like Perl and the various shells, a dollar sign means the word following is the name of the variable. Awk is different. The dollar sign means that we are refering to a field or column in the current line. When switching between Perl and AWK you must remener that &#8220;$&#8221; has a different meaning. So the following piece of code prints two &#8220;fields&#8221; to standard out. The first field printed is the number &#8220;5&#8221;, the second is the fifth field (or column) on the input line.</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span>BEGIN <span class="o">{</span> <span class="nv">x</span><span class="o">=</span><span class="m">5</span> <span class="o">}</span>
<span class="o">{</span> print x, <span class="nv">$x</span><span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="awk-essential-syntax.html" class="btn btn-neutral float-right" title="17.2. The Essential Syntax of AWK" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="17. awk-tutorial" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, tw.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>