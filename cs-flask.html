

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4 flask notes and snippets (cs-flask)</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon-penn.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/my_theme.css" type="text/css" />
  

  

  
    <link rel="top" title="" href="index.html"/>
        <link rel="up" title="Python-type (top-python.rst)" href="top-python.html"/>
        <link rel="next" title="5 jinja notes and snippets (cs-jinja)" href="cs-jinja.html"/>
        <link rel="prev" title="3 Plotly snippets (cs-plotly)" href="cs-plotly.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Snippets
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="top-python.html">Python-type (<code class="docutils literal"><span class="pre">top-python.rst</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cs-python.html">1 Python (<code class="docutils literal"><span class="pre">cs-python.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#packages-installed-on-the-fly">1.1 packages installed on the fly</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#random-stack-overflow-questions">1.2 Random Stack-overflow questions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#merge-dictionaries">1.2.1 merge dictionaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#a-bit-on-python-unicode">1.2.2 A bit on python unicode</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#locale-thing-since-i-m-getting-errors-in-sphinx-regarding-unicode-error">1.2.3 Locale thing (since i&#8217;m getting errors in sphinx regarding unicode error</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#what-does-sitecustomize-py-do">1.2.4 what does sitecustomize.py do?</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#things-you-can-do-with-a-file-object">1.2.5 Things you can do with a <strong>file</strong> object</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#simplejson">1.2.6 simplejson</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#find-first-occurence-in-a-list">1.2.7 Find first occurence in a list</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#swap-2-items-in-a-list">1.2.8 Swap 2 items in a list</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#check-all-items-in-list-or-dict-is-equal">1.2.9 Check all items in list or dict is equal</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#exceptions">1.3 Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#my-most-frequent-lazy-usecase">1.3.1 My most frequent <em>lazy</em> usecase</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#top-pandas">1.4 Top-pandas</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#pandas-check-if-all-columns-are-equal-in-a-dataframe">1.4.1 Pandas - check if all columns are equal in a DataFrame</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#top-mpl">1.5 top-mpl</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#change-fontweight-and-size-in-pre-existing-legend">1.5.1 Change fontweight and size in pre-existing legend</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#change-xlabel-and-ylabel-fontsize-for-axes-already-existing">1.5.2 Change xlabel and ylabel fontsize for axes already existing</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#when-plt-tight-layout-doesn-t-work-as-expected">1.5.3 When plt.tight_layout doesn&#8217;t work as expected</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#append-to-existing-axes-title">1.5.4 Append to existing axes title</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#change-figure-size-of-existing-figure">1.5.5 Change figure size of <em>existing</em> figure</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#change-figure-size-one-already-plotted">1.5.6 Change figure size (one already plotted)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#plotting-and-saving-figure-on-remotely-on-server-on-sge-submission">1.6 Plotting and saving figure on remotely on server (on sge submission)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#change-i-made-to-my-figure-function">1.6.1 Change i made to my figure function</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#check-if-x11-is-enabled-in-python-script">1.6.2 Check if X11 is enabled in python script</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#disk-io">1.7 Disk IO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#write-list-items-to-text">1.7.1 Write list items to text</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#seaborn-and-pandas-plots">1.8 Seaborn and Pandas plots</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#mpl-and-sns">1.8.1 mpl and sns?</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#color-palette">1.8.2 Color palette</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#python-commands-from-shell">1.9 Python commands from shell</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#matplotlib-styling">1.10 Matplotlib styling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#default-color-cycle">1.10.1 Default color cycle</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#colormap-helper">1.10.2 Colormap helper</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#installing-modules">1.11 installing modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#gochtas">1.12 gochtas</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#careful-with-array-slicing-may-change-array-values">1.12.1 careful with array slicing! may change array values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#decorator">1.13 decorator</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#plotting-short-snippets">1.14 Plotting - short snippets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#cool-tricks">1.14.1 Cool tricks</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-python.html#plotting-snippets">1.14.2 Plotting Snippets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#id1">1.15 Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-python.html#clever-tricks">1.16 Clever tricks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-pyspark.html">2 pyspark (<code class="docutils literal"><span class="pre">cs-pyspark.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-pyspark.html#stack-overflows">2.1 Stack overflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#sort-related-functions-for-rdds">2.1.1 Sort related functions for RDDs</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#use-rdd-flatmap-to-get-flattened-list">2.1.2 Use <code class="docutils literal"><span class="pre">RDD.flatMap</span></code> to get <em>flattened</em> list</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#there-s-no-uniq-function-in-pyspark-use-distinct">2.1.3 There&#8217;s no uniq function in pyspark, use distinct</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#how-to-concatenate-two-rdds-use-union-method">2.1.4 How to concatenate two RDDs (use union method)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#take-ordered">2.1.5 Take ordered...</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#numpy-array-to-spark-dataframe-trickier-than-i-thought">2.1.6 numpy array to spark dataframe...trickier than i thought...</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#adding-new-columns-to-spark-dataframes">2.1.7 Adding new columns to Spark DataFrames</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-pyspark.html#handy-snippets">2.2 Handy snippets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#word-count-demo-concise">2.2.1 word-count demo concise</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#classic-wordcount-demo">2.2.2 Classic wordcount demo</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#todo-run-this-script">2.2.3 Todo: run this script</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#bunch-of-example-scripts">2.2.4 Bunch of example scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#use-of-persist-rdd-persistence">2.2.5 Use of persist (RDD persistence)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-pyspark.html#sql-in-pyspark">2.3 SQL in pyspark</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-pyspark.html#spark-sql-dataframes-and-datasets-guide">2.4 Spark SQL, DataFrames and Datasets Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#dataframes">2.4.1 DataFrames</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#inter-operating-rdd-dataframes">2.4.2 Inter-operating RDD &amp; DataFrames</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#data-sources">2.4.3 Data Sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#saving-to-persistent-tables">2.4.4 Saving to Persistent Tables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-pyspark.html#programming-guide-condensed-summary">2.5 Programming-guide: condensed summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#super-basics">2.5.1 Super basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#shared-variables">2.5.2 Shared variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#rdd-operations">2.5.3 RDD operations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-pyspark.html#random-handy-snippets">2.6 Random handy snippets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#compute-average">2.6.1 compute average</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-pyspark.html#cs105-hw2">2.6.2 cs105 hw2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-plotly.html">3 Plotly snippets (<code class="docutils literal"><span class="pre">cs-plotly</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#imports">3.1 Imports</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#offline-mode">3.1.1 offline mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#get-mapbox-token">3.2 Get mapbox token</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#my-privacy-setting">3.3 My privacy setting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#cufflinks-setting">3.3.1 cufflinks setting</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#demo-plot">3.3.2 demo plot</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#get-figure-object-from-url">3.4 Get figure object from url</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#figure-to-string">3.5 figure.to_string</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#cf-offline">3.6 CF offline</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#cufflinks-set-line-style-using-list">3.7 Cufflinks - set line style using list</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#use-requests-package-to-communicate-with-my-plotly-web-account">3.8 Use <code class="docutils literal"><span class="pre">requests</span></code> package to communicate with my plotly web account</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#use-requests-package-to-get-static-image">3.8.1 Use requests package to get static image</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#configure-authorization">3.8.2 Configure authorization</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#trash-restore-delete-from-plotly-account">3.8.3 trash, restore, delete from plotly account</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#make-all-existing-plots-private">3.8.4 Make all existing plots private</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#colorscale-setting">3.9 Colorscale setting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#converting-colorscale-from-colorlovers">3.9.1 Converting colorscale from colorlovers</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#from-mpl-cm">3.9.2 from mpl cm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#subplots-with-addtrace-method">3.10 Subplots with addtrace method</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#update-layout-posthoc">3.11 Update layout posthoc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#another-example">3.11.1 Another example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#d-subplots">3.12 3d subplots</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#embed-in-ipynb">3.13 Embed in ipynb</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#static-image-io">3.14 static image IO</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#getfigure">3.15 Getfigure</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#demo-mpl-to-plotly">3.16 Demo - MPL to plotly</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#seaborn-demo">3.17 Seaborn demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#webgl-heatmap">3.18 webgl heatmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#log-plots">3.19 log plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-plotly.html#layout-to-change">3.20 Layout to change</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-plotly.html#background-color">3.20.1 Background color</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">4 flask notes and snippets (<code class="docutils literal"><span class="pre">cs-flask</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#useful-functions-and-classes">4.1 Useful functions and classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#app-flask-object-summary-whirlwind">4.2 app (Flask object) summary (whirlwind)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#app-context">4.2.1 app.context</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-teardown-appcontext">4.2.2 app.teardown_appcontext</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-config">4.2.3 app.config</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-route-with-variables">4.2.4 app.route with variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-route-with-request-object">4.2.5 app.route with request object</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-test-request-context">4.2.6 app.test_request_context</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-errorhandler">4.2.7 app.errorhandler</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-template-filter-custom-filter">4.2.8 app.template_filter (custom filter)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-context-processor-make-var-func-accessible-in-any-template">4.2.9 app.context_processor (make var/func accessible in any template)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-logger-haven-t-used-it-yet">4.2.10 app.logger (haven&#8217;t used it yet)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#standard-context">4.3 Standard Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="#application-context-to-cache-resource-like-database-connections">4.4 Application context (to cache resource, like database connections)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#context-usage-database-connections">4.4.1 Context Usage (<strong>Database connections</strong>)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-handling">4.5 Configuration Handling</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#config-from-external-file">4.5.1 Config from external file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#builtin-configuration-values">4.5.2 Builtin Configuration Values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#request-object">4.6 Request object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#quickstart-4-3-http-methods">4.6.1 Quickstart - 4.3 HTTP Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quickstart-7-accessing-request-data">4.6.2 Quickstart - 7. Accessing Request Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#response-object">4.7 Response object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#quick-start-9-about-responses">4.7.1 Quick start 9. About Responses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#session-object">4.8 Session object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#flask-api">4.8.1 flask api</a></li>
<li class="toctree-l4"><a class="reference internal" href="#quickstart-10-sessions">4.8.2 Quickstart 10. Sessions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-generate-good-secret-keys">4.8.3 How to generate good secret keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#refresher-on-http-methods">4.9 Refresher on HTTP Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-url-for">4.10 Using url_for</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variable-rules-in-routing-app-route">4.11 Variable rules in routing (app.route)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#redirecting-and-errors">4.12 Redirecting and errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#error-handling-not-read-yet">4.12.1 Error handling (not read yet)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-error-page">4.12.2 Custom error page</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#json-stuffs">4.13 json stuffs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#flask-jsonify">4.13.1 flask.jsonify</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-jinja.html">5 jinja notes and snippets (<code class="docutils literal"><span class="pre">cs-jinja</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cs-py-jupyter.html">6 python-jupyter (<code class="docutils literal"><span class="pre">cs-py-jupyter</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-py-jupyter.html#ipython-package">6.1 IPython package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-py-jupyter.html#image">6.1.1 Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-py-jupyter.html#youtube">6.1.2 youtube</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-py-jupyter.html#latex">6.1.3 latex</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-py-jupyter.html#toc-for-hosting-on-jupyter-notebook">6.2 TOC for hosting on jupyter notebook</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-py-jupyter.html#cell-magics">6.3 Cell magics</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-py-jupyter.html#enable-toggle-code">6.4 Enable <code class="docutils literal"><span class="pre">toggle</span></code> code</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-py-jupyter.html#ipython-notebook-defaults">6.5 Ipython notebook defaults</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-py-jupyter.html#frequently-used-config">6.5.1 Frequently used config</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-py-jupyter.html#widgets">6.6 widgets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-py-jupyter.html#all-widget-types">6.6.1 All widget types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-py-jupyter.html#current-config">6.7 Current config</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bct.html">7 Brain Connectivity Toolbox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated/bct.algorithms.html">7.1 bct.algorithms</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generated/bct.algorithms.html#functions">7.1.1 Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/bct.algorithms.html#exceptions">7.1.2 Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="generated/bct.utils.html">7.2 bct.utils</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generated/bct.utils.html#functions">7.2.1 Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/bct.utils.html#exceptions">7.2.2 Exceptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="generated/bct.nbs.html">7.3 bct.nbs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="generated/bct.nbs.html#functions">7.3.1 Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="generated/bct.nbs.html#exceptions">7.3.2 Exceptions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="top-bash.html">Bash-type (<code class="docutils literal"><span class="pre">top-bash</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cs-bash-commands.html">1 bash-commands (<code class="docutils literal"><span class="pre">cs-bash-commands</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#overflows">1.1 Overflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#wget-vs-curl">1.1.1 wget vs curl</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#what-os-am-i">1.1.2 What OS am I</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#should-i-put-my-aliases-in-bashrc-or-bash-aliases">1.1.3 Should I put my aliases in .bashrc or .bash_aliases?</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#function-in-single-line-for-bashrc">1.1.4 Function in single line (for bashrc)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#locale-thing-since-i-m-getting-errors-in-sphinx-regarding-unicode-error">1.1.5 Locale thing (since i&#8217;m getting errors in sphinx regarding unicode error</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#more-stuffs-with-ls">1.1.6 More stuffs with ls</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#insightful-sed-example">1.1.7 Insightful sed example</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#remove-colors-from-stdout-harder-than-i-expected">1.1.8 Remove colors from stdout (harder than i expected)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#sigint-and-sigstp">1.1.9 SIGINT and SIGSTP</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#quoting-with-command-substitution">1.1.10 Quoting with command substitution</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#display-function-names">1.1.11 Display function names</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#get-n-th-line-of-output-used-sed">1.1.12 get n-th line of output (used sed</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#quotes-with-grep">1.1.13 Quotes with grep</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#escaping-single-quotes-a-mess">1.2 Escaping single quotes (a mess...)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#using-rename-command">1.3 Using rename command</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#rename-files-with-suffix-or-prefix">1.3.1 Rename files with suffix or prefix</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#regexp-syntax-with-rename">1.3.2 regexp syntax with rename</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#random-handy-snippets">1.4 Random handy snippets</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#replace-whitespace-with-newline-in-sed">1.5 replace whitespace with newline in sed</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#what-if-multiple-line-is-spanned">1.5.1 What if multiple line is spanned?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#check-running-processes">1.6 check running processes</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#nohup-vs-disown-vs">1.7 nohup vs disown vs &amp;</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#moving-and-copying">1.8 Moving and copying</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#scp-user">1.8.1 scp user</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#rsync">1.8.2 rsync</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#find">1.9 find</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#note-find-vs-locate">1.9.1 Note: <strong>find</strong> vs <strong>locate</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#command-vs-command-use-latter">1.10 ``command`` vs $(command) (use latter)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#ls-tricks">1.11 ls tricks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#ls-recursively-use-find">1.11.1 ls recursively (use <em>find</em>)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#show-only-symbolic-links-alias-ls-sym">1.11.2 show only symbolic links (<strong>alias ls_sym</strong>)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#print-timestamp">1.12 print timestamp</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#open-image-xdg-open-image-png">1.13 open image ($xdg-open image.png)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#options-with-less-ongoing">1.14 Options with <strong>less</strong> (ongoing)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#history-w-o-line-numbers">1.15 history w/o line-numbers</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#when-xargs-is-needed">1.16 When xargs is needed</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#get-computer-info">1.17 Get computer info</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#mogrify">1.18 mogrify</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#pipe-dreams-xargs-exec-in-find">1.19 Pipe dreams (xargs, -exec in find)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#grep">1.20 Grep</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#grep-recursively">1.20.1 grep recursively</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#to-grep-a-string-pipe-output-of-echo">1.20.2 To grep a string, pipe output of echo</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#d-not-supported-in-linux-grep-as-default-seems-like">1.20.3 <code class="docutils literal"><span class="pre">\d</span></code> not supported in linux grep as default...seems like</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#just-use-double-quotes-for-regex-query">1.20.4 just use double-quotes for regex query</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#selecting-n-th-line-or-word-using-sed-and-awk">1.21 Selecting n-th line or word using sed and awk</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#use-xargs-to-execute-a-command-once-per-line-of-piped-input">1.22 Use xargs to execute a command once per line of piped input</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#run-same-command-multiple-times-for-loop">1.23 Run same command multiple times (for loop)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#clipboard-with-xclip">1.24 clipboard with xclip</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#io-redirection">1.25 IO Redirection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#piping-vs-command-substitution">1.25.1 Piping vs command substitution</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#redirecting-vs-piping">1.25.2 redirecting vs piping</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#output-stdout-and-stderr-to-terminal-and-logfile">1.25.3 Output stdout and stderr to terminal and logfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#syntax-reference">1.25.4 syntax reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#bit-on-printf">1.26 Bit on printf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#examples-from-ss64">1.26.1 Examples from ss64</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#for-loop">1.27 for loop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#basics">1.27.1 basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#multiline-in-terminal">1.27.2 multiline in terminal</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#looping-over-array-elements">1.27.3 Looping over array elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#number-of-elements-in-an-array-using-array">1.27.4 number of elements in an array using <code class="docutils literal"><span class="pre">${#array[&#64;]}</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#avoid-ls-use-globbing-or-find">1.27.5 avoid $(ls)...use globbing or find</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-commands.html#arithmetic-expansion">1.28 arithmetic expansion ((..))</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-commands.html#let-vs">1.28.1 let vs (())?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-bash-scripts.html">2 bash-scripts (<code class="docutils literal"><span class="pre">cs-bash-scripts</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#overflow-topics">2.1 Overflow topics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-scripts.html#source-vs-in-bash-synonymous">2.1.1 source vs . in bash (synonymous)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-scripts.html#check-file-existance">2.1.2 Check file existance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#simple-loop-for-python">2.2 Simple loop for python</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#qsub">2.3 qsub</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-scripts.html#my-old-qsub-approach">2.3.1 my old qsub approach</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-scripts.html#qsub-run">2.3.2 qsub-run</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#place-exit-1-to-end-script">2.4 place exit 1 to end script</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#style-guide-and-conventions">2.5 Style-guide and conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#arrays">2.6 arrays</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-scripts.html#expanding-indices">2.6.1 Expanding indices</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-bash-scripts.html#practical-example">2.6.2 practical example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#control-rsync-recursive-depth">2.7 control rsync recursive depth</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#skip-scp-if-file-exist-tldr-use-rsync">2.8 skip scp if file exist (tldr - use rsync</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#rsync-symlinks">2.9 rsync symlinks</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#appending-concatenating-variables">2.10 Appending/concatenating variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#command-vs-command">2.11 <code class="docutils literal"><span class="pre">command</span></code> vs $(command)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#variable-name-convention">2.12 variable name convention</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#how-to-expand-tilde">2.13 How to expand ~ (tilde)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#create-directory-if-it-doesn-t-exist-06-14-2016-00-17">2.14 Create directory if it doesn&#8217;t exist 06-14-2016 (00:17)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#vs-in-arrays">2.15 [&#64;] vs [*] in arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#id1">2.16 1&gt;&amp;2</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#if-statements-and-test-conditions">2.17 if statements and test conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#argh-can-t-comment-over-line-breaks">2.18 argh...can&#8217;t comment over line breaks....</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-bash-scripts.html#get-directory-of-running-bash-script">2.19 get directory of running bash script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-qsubber.html">3 qsubber (<code class="docutils literal"><span class="pre">cs-qsubber.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-qsubber.html#qsub-helper">3.1 qsub helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-qsubber.html#qsub-helper-old-pre-april-2016">3.2 qsub helper (old, pre April 2016</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-qsubber.html#a-3-step-receipe-for-matlab">3.2.1 A 3 step receipe for matlab</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-qsubber.html#memrec-to-evaluate-appropriate-h-vmem-value">3.2.2 <code class="docutils literal"><span class="pre">memrec</span></code> (to evaluate appropriate <code class="docutils literal"><span class="pre">h_vmem</span></code> value</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-qsubber.html#qstat">3.2.3 <code class="docutils literal"><span class="pre">qstat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-qsubber.html#usr-bin-time-to-see-multithreaded-or-not">3.2.4 <code class="docutils literal"><span class="pre">/usr/bin/time</span></code> to see multithreaded or not</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-git.html">4 git-snippet (<code class="docutils literal"><span class="pre">cs-git.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-git.html#remove-folder-and-or-filetypes-from-git-repos">4.1 Remove folder and/or filetypes from git repos</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-git.html#random-overflows">4.2 Random Overflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-git.html#clone-specific-tag">4.2.1 Clone specific tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-git.html#delete-untracked-files">4.2.2 Delete untracked files</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-git.html#change-author-name">4.2.3 change author name</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="top-datascience.html">Data Science (<code class="docutils literal"><span class="pre">top-datascience</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cs-R.html">1 R (<code class="docutils literal"><span class="pre">cs-R.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-R.html#bunch-of-quick-refresher-i-find-handy">1.1 Bunch of quick refresher I find handy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#getting-help">1.1.1 Getting help</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#path-info">1.1.2 Path info</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#customize-startup">1.1.3 Customize startup</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#get-data-info">1.1.4 Get data info</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#datatypes-quickr">1.1.5 Datatypes - quickR</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#basic-data-structures">1.1.6 Basic data structures</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#nas">1.1.7 NAs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-R.html#installed-packages">1.2 Installed packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-R.html#make-sure-gcc-g-and-gfortran-are-the-same-version">1.3 Make sure gcc, g++, and gfortran are the same version</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-R.html#random-overflows">1.4 Random Overflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#locate-rprofile-path">1.4.1 locate rprofile path</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#figures">1.4.2 Figures</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#packages-installed">1.4.3 Packages installed</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-R.html#snippets-in-rstudio">1.5 Snippets in RStudio</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-R.html#current-content-in-r-snippets">1.5.1 Current content in <code class="docutils literal"><span class="pre">r.snippets</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-R.html#todo-break-these-down-to-smaller-pieces">1.6 TODO: break these down to smaller pieces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-sql.html">2 sql (<code class="docutils literal"><span class="pre">cs-sql.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#mysql">2.1 mysql</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#auto-completion">2.1.1 Auto completion</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#random-overflows">2.1.2 Random overflows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#codezen-mysql">2.2 Codezen mysql</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#mysqldump">2.2.1 mysqldump</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#run-sql-statement-from-commandline">2.2.2 Run sql statement from commandline</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#bunch-of-functions">2.2.3 Bunch of functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#write-to-file">2.2.4 Write to file</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#write-to-csv-file">2.2.5 Write to csv file</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#read-csv-file">2.2.6 Read csv file</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#write-and-read-xml-file">2.2.7 write and read xml file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#mysql-codezen">2.3 MYSQL codezen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#create-and-populate-a-table">2.3.1 Create and populate a table</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#retrieve-data">2.3.2 Retrieve data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#cursor-type">2.3.3 cursor type</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#column-headers">2.3.4 Column headers</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#use-prepared-statements-placeholders-to-avoid-sql-injections">2.3.5 Use <em>prepared statements</em> (placeholders to avoid sql injections)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#insert-images-using-blob-type">2.3.6 Insert images using BLOB type</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#read-image">2.3.7 Read image</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#transaction-support">2.3.8 Transaction support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#sqlite">2.4 SQLite</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#overflow-stuffs">2.5 Overflow stuffs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#random-uncategorized">2.5.1 Random uncategorized</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#insert-into-vs-select-into">2.5.2 INSERT INTO vs SELECT INTO</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#between-clause-vs-and-such">2.5.3 Between clause vs <code class="docutils literal"><span class="pre">&lt;=</span></code> and such</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#drop-unnamed-constraints">2.5.4 Drop unnamed constraints?</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#doing-stuffs-from-the-command-line">2.5.5 Doing stuffs from the command line</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#style-guidelines-conventions">2.6 Style guidelines, conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#basic-commands-keywords">2.7 Basic commands/keywords</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#sql-zoo">2.8 sql-zoo</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#select-basics">2.8.1 SELECT basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sql.html#math-functions">2.8.2 math functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-sql.html#different-rdbms">2.9 different RDBMS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-perl-oneliners.html">3 <code class="docutils literal"><span class="pre">cs-perl-oneliners.rst</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#perl-help-refresher-on-command-line-options">3.1 $ perl &#8211;help (refresher on command line options)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#file-spacing">3.2 FILE SPACING</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#line-numbering">3.3 LINE NUMBERING</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#calculations">3.4 CALCULATIONS</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#string-creation-and-array-creation">3.5 STRING CREATION AND ARRAY CREATION</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#text-conversion-and-substitution">3.6 TEXT CONVERSION AND SUBSTITUTION</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#selective-printing-and-deleting-of-certain-lines">3.7 SELECTIVE PRINTING AND DELETING OF CERTAIN LINES</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#handy-regular-expressions">3.8 HANDY REGULAR EXPRESSIONS</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#perl-tricks">3.9 PERL TRICKS</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-perl-oneliners.html#perl-one-liners-explained-e-book">3.10 PERL ONE-LINERS EXPLAINED E-BOOK</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-regexp.html">4 regular expressions (<code class="docutils literal"><span class="pre">cs-regexp</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-regexp.html#overflows">4.1 Overflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#use-perl-engine-in-bash">4.1.1 Use Perl engine in bash</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#negate-specific-word">4.1.2 Negate specific word?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-regexp.html#sublimetext">4.2 Sublimetext</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-regexp.html#regular-expression-regexp-for-python">4.3 Regular expression (regexp) for python</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#basic-functions-modules">4.3.1 Basic functions/modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#splitting-strings">4.3.2 Splitting strings</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#search-and-replace-with-sub">4.3.3 Search and replace with sub</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#compilation-flags">4.3.4 Compilation flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#greedy-vs-nongreedy">4.3.5 Greedy vs nongreedy</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#improve-readibility-with-re-verbose-flag">4.3.6 Improve readibility with re.Verbose flag</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#named-groups">4.3.7 Named groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#lookahed-assertions">4.3.8 Lookahed assertions</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-regexp.html#bunch-of-examples">4.3.9 Bunch of examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-scala.html">5 Scala (<code class="docutils literal"><span class="pre">cs-scala.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-scala.html#random-overflow-threads">5.1 Random overflow threads</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-scala.html#linear-algebra-in-scala">5.2 Linear algebra in scala?</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-scala.html#scala-lab">5.3 scala-lab?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="top-unix.html">Unix utilities (<code class="docutils literal"><span class="pre">top-unix.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cs-sed.html">1 sed (<code class="docutils literal"><span class="pre">cs-sed.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-sed.html#references">1.1 References</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-sed.html#go-to-gnu-manual-for-an-overkill">1.1.1 Go to GNU manual for an overkill :)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sed.html#others">1.1.2 Others</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed.html#random-snippets">1.2 Random snippets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-sed.html#insightful-example">1.2.1 Insightful example</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sed.html#fixname-sh">1.2.2 fixname.sh</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed.html#ultra-basics">1.3 Ultra-basics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-sed.html#basics-print-delete-and-substitution">1.3.1 Basics: print, delete, and substitution</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sed.html#deletion-commands">1.3.2 deletion commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sed.html#substitution-basics">1.3.3 Substitution basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-sed.html#the-e-f-options">1.3.4 the -e, -f options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed.html#sed-help">1.4 sed &#8211;help</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed.html#output-from-man-page">1.5 output from man page</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-sed-oneliners.html">2 <code class="docutils literal"><span class="pre">cs-sed-oneliners.rst</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#sed-help">2.1 sed &#8211;help</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#typical-use">2.2 Typical use</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#file-spacing">2.3 FILE SPACING:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#numbering">2.4 NUMBERING:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#text-conversion-and-substitution">2.5 TEXT CONVERSION AND SUBSTITUTION:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#selective-printing-of-certain-lines">2.6 SELECTIVE PRINTING OF CERTAIN LINES:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#selective-deletion-of-certain-lines">2.7 SELECTIVE DELETION OF CERTAIN LINES:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#special-applications">2.8 SPECIAL APPLICATIONS:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-sed-oneliners.html#misc">2.9 Misc</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-awk.html">3 awk (<code class="docutils literal"><span class="pre">cs-awk.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-awk.html#note-do-i-really-need-awk">3.1 note: do I really need awk?</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk.html#my-use-case-for-awk-for-files-containing-columns-fields">3.2 My use-case for awk (for files containing columns/fields)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk.html#random-snippets">3.3 Random snippets</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk.html#awk-one-liners">3.4 awk (one-liners)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-awk.html#great-examples-here">3.4.1 Great examples here!</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk.html#awk-help">3.5 awk &#8211;help</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-awk-oneliners.html">4 <code class="docutils literal"><span class="pre">cs-awk-oneliners.rst</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-awk-oneliners.html#file-spacing">4.1 File spacing</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk-oneliners.html#numbering-and-calculations">4.2 NUMBERING AND CALCULATIONS:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk-oneliners.html#string-creation">4.3 STRING CREATION:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk-oneliners.html#array-creation">4.4 ARRAY CREATION:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk-oneliners.html#text-conversion-and-substitution">4.5 TEXT CONVERSION AND SUBSTITUTION:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk-oneliners.html#selective-printing-of-certain-lines">4.6 SELECTIVE PRINTING OF CERTAIN LINES:</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-awk-oneliners.html#selective-deletion-of-certain-lines">4.7 SELECTIVE DELETION OF CERTAIN LINES:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="top-rst.html">Sphinx/RST-notes (<code class="docutils literal"><span class="pre">top-rst.rst</span></code>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cs-rst.html">1 rst (<code class="docutils literal"><span class="pre">cs-rst.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.html#best-lookups">1.1 Best lookups</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.html#important-external-directives">1.2 Important external directives</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.html#random-overflows">1.3 Random overflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.html#making-minor-changes-to-sphinx-theme-s">1.3.1 Making minor changes to sphinx theme&#8217;s</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.html#rst-to-markdowns">1.3.2 rst to markdowns?</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.html#get-colors">1.3.3 Get colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.html#add-links-without-labels">1.3.4 Add links without labels</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.html#link-is-kinda-confusing">1.4 Link is kinda confusing...</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.html#hmmm">1.4.1 hmmm</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.html#ah-finally-what-i-wanted">1.4.2 Ah, finally what i wanted</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.html#csv-demo">1.5 csv-demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.html#lookups-old-may-remove-this-section">1.6 Lookups (old, may remove this section)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.html#references-for-rst-in-general-non-sphinx">1.6.1 References for rst in general (non-sphinx)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.html#autodoc-related">1.6.2 Autodoc related</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-rst.directive-test.html">2 Test runs on RST directives (<code class="docutils literal"><span class="pre">cs-rst.directive-test.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.directive-test.html#admonitions">2.1 Admonitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.directive-test.html#images">2.2 Images</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#image">2.2.1 Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#figure">2.2.2 figure</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.directive-test.html#additional-body-elements">2.3 Additional body elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#id1">2.3.1 contents</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#container">2.3.2 container</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#rubric">2.3.3 rubric</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#topics">2.3.4 topics</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#sidebar">2.3.5 sidebar</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#parsed-literal">2.3.6 parsed-literal</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#epigraph">2.3.7 epigraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#highlights">2.3.8 highlights</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#pull-quote">2.3.9 pull-quote</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#compound">2.3.10 compound</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.directive-test.html#special-tables">2.4 Special tables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#table">2.4.1 table</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#csv-table">2.4.2 csv-table</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#list-table">2.4.3 list-table</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.directive-test.html#special-directives">2.5 Special directives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#raw">2.5.1 raw</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#include">2.5.2 include</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#class">2.5.3 class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.directive-test.html#html-specifics">2.6 HTML specifics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#meta">2.6.1 meta</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#title">2.6.2 title</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.directive-test.html#influencing-markup-i-rarely-use">2.7 Influencing Markup (i rarely use)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#default-role-set-a-new-default-role">2.7.1 default-role (set a new default role)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#role-create-a-new-role">2.7.2 role (create a new role)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.directive-test.html#foot-notes-citations-substitutions">2.8 Foot-notes, citations, substitutions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#footnotes">2.8.1 footnotes</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#citations">2.8.2 citations</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.directive-test.html#substitutions">2.8.3 substitutions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-rst.math_part1.html">3 Latex mathematics on sphinx (<code class="docutils literal"><span class="pre">cs-rst.math_part1.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#symbols">3.1 Symbols</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#greek-letters">3.2 Greek letters</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#operators">3.3 Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#fractions-and-binomials">3.4 Fractions and Binomials</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#square-roots">3.5 Square roots</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#sum-and-integrals">3.6 Sum and integrals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.math_part1.html#big-commands">3.6.1 <strong>BIG</strong> commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#brackets-braces-and-delimiters">3.7 Brackets, braces and delimiters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.math_part1.html#automatic-sizing">3.7.1 Automatic sizing</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.math_part1.html#manual-sizing">3.7.2 Manual sizing</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.math_part1.html#typesetting-intervals">3.7.3 Typesetting intervals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#matrices-and-array">3.8 Matrices and array</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.math_part1.html#more-fancy-ones">3.8.1 More fancy ones</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#adding-text-to-equations">3.9 Adding text to equations</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#formatting-mathematics-symbols">3.10 Formatting mathematics symbols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.math_part1.html#accents">3.10.1 Accents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#color-works">3.11 Color (works!)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#plus-and-minus">3.12 Plus and minus</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#controlling-horizontal-spacing">3.13 Controlling horizontal spacing</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#dots">3.14 Dots</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst.math_part1.html#list-of-mathematical-symbols">3.15 List of Mathematical Symbols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.math_part1.html#other-symbols">3.15.1 Other symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst.math_part1.html#trigonemtrics">3.15.2 Trigonemtrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs_rst.math_part2.html">4 Advanced Latex Mathematics on Sphinx (<code class="docutils literal"><span class="pre">cs_rst.math_part2.rst</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#some-self-notes-i-created">4.1 Some self-notes I created</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs_rst.math_part2.html#bold-for-lower-case-greek">4.1.1 bold for lower-case greek</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs_rst.math_part2.html#defining-own-function">4.1.2 Defining own function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#equations">4.2 Equations</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#vertical-alignment">4.3 Vertical alignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#more-aligns">4.4 More aligns</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#braces-spanning-multiple-lines">4.5 Braces spanning multiple lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#aligning-braces-for-piecewise-functions">4.6 Aligning braces for piecewise functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#the-cases-environment">4.7 The <strong>cases</strong> environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#more-exotic-examples">4.8 More exotic examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#boxed-equations">4.9 Boxed equations</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#custom-operator-ah-argmax">4.10 Custom operator (ah, argmax!)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#advanced-formatting">4.11 Advanced formatting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs_rst.math_part2.html#limits">4.11.1 Limits</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs_rst.math_part2.html#subscripts-and-supterscripts">4.11.2 Subscripts and supterscripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs_rst.math_part2.html#changing-font-size">4.12 Changing font size</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cs-rst.ipython.html">5 Demo runs of ipython sphinx extensions (<code class="docutils literal"><span class="pre">cs-rst.ipython.rst</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cs-rst-old.html">6 rst old cheatsheet (<code class="docutils literal"><span class="pre">cs-rst-old</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cs-rst-old.html#directives-i-found-useful-or-runs-on-github">6.1 DIRECTIVES I FOUND USEFUL OR RUNS ON GITHUB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#image">6.1.1 .. image::</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#code-use-with-number-lines-option">6.1.2 .. code:: (use with <code class="docutils literal"><span class="pre">:number-lines:</span></code> option)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#table">6.1.3 .. table::</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#csv-table">6.1.4 .. csv-table::</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#contents">6.1.5 .. contents::</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#sectnum-works-but-warning-seem-to-screw-up-the-toc-link">6.1.6 .. sectnum:: ...works....but <strong>WARNING!</strong> - seem to screw up the TOC link</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#header-and-footer">6.1.7 .. header:: (and .. footer::)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#sadly-math-doesn-t-render-on-github-works-on-bitbucket">6.1.8 Sadly <code class="docutils literal"><span class="pre">..</span> <span class="pre">math::</span></code> doesn&#8217;t render on github (works on bitbucket)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#replace">6.1.9 .. replace::</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#unicode">6.1.10 .. unicode::</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#date">6.1.11 ..date::</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst-old.html#list-of-gotcha-s-to-watch-out-for-at-least-the-ones-i-suffered-from">6.2 List of <strong>GOTCHA&#8217;s</strong> to watch out for (at least the ones I suffered from...)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#gotcha-s-with-nested-list-items">6.2.1 Gotcha&#8217;s with nested list items</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#id1">6.2.2 Sadly <code class="docutils literal"><span class="pre">..</span> <span class="pre">math::</span></code> doesn&#8217;t render on github (works on bitbucket)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#gotcha-s-with-contents">6.2.3 GOTCHA&#8217;s with <code class="docutils literal"><span class="pre">..</span> <span class="pre">contents::</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#h1-h2-problems">6.2.4 <code class="docutils literal"><span class="pre">h1</span></code> <code class="docutils literal"><span class="pre">h2</span></code> ... problems</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#including-styles-on-header-names-will-break-the-toc-link-on-github-unconfirmed">6.2.5 Including styles on HEADER-NAMES will break the TOC link on github (unconfirmed)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#directives-that-just-doesnt-work-on-github-or-sublime-text">6.2.6 Directives that just doesnt work on github or Sublime Text</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#some-special-characters-that-may-be-a-head-ache-to-print">6.2.7 Some special characters that may be a head-ache to print</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cs-rst-old.html#roles-in-rst">6.3 <code class="docutils literal"><span class="pre">roles</span></code> in RST</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#list-of-equivalent-roles-ultra-incomplete">6.3.1 List of equivalent <code class="docutils literal"><span class="pre">roles</span></code> (ultra-incomplete)</a></li>
<li class="toctree-l4"><a class="reference internal" href="cs-rst-old.html#some-interesting-looking-roles">6.3.2 Some interesting looking <code class="docutils literal"><span class="pre">roles</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Snippets</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="top-python.html">Python-type (<code class="docutils literal"><span class="pre">top-python.rst</span></code>)</a> &raquo;</li>
      
    <li>4 flask notes and snippets (<code class="docutils literal"><span class="pre">cs-flask</span></code>)</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/cs-flask.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="flask-notes-and-snippets-cs-flask">
<h1>4 flask notes and snippets (<code class="docutils literal"><span class="pre">cs-flask</span></code>)<a class="headerlink" href="#flask-notes-and-snippets-cs-flask" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title first"><cite>Contents</cite></p>
<ul class="simple">
<li><a class="reference internal" href="#useful-functions-and-classes" id="id2">Useful functions and classes</a></li>
<li><a class="reference internal" href="#app-flask-object-summary-whirlwind" id="id3">app (Flask object) summary (whirlwind)</a></li>
<li><a class="reference internal" href="#standard-context" id="id4">Standard Context</a></li>
<li><a class="reference internal" href="#application-context-to-cache-resource-like-database-connections" id="id5">Application context (to cache resource, like database connections)</a></li>
<li><a class="reference internal" href="#configuration-handling" id="id6">Configuration Handling</a></li>
<li><a class="reference internal" href="#request-object" id="id7">Request object</a></li>
<li><a class="reference internal" href="#response-object" id="id8">Response object</a></li>
<li><a class="reference internal" href="#session-object" id="id9">Session object</a></li>
<li><a class="reference internal" href="#refresher-on-http-methods" id="id10">Refresher on HTTP Methods</a></li>
<li><a class="reference internal" href="#using-url-for" id="id11">Using url_for</a></li>
<li><a class="reference internal" href="#variable-rules-in-routing-app-route" id="id12">Variable rules in routing (app.route)</a></li>
<li><a class="reference internal" href="#redirecting-and-errors" id="id13">Redirecting and errors</a></li>
<li><a class="reference internal" href="#json-stuffs" id="id14">json stuffs</a></li>
</ul>
</div>
<div class="admonition-best-lookups-references admonition">
<p class="first admonition-title">Best lookups/references</p>
<ul class="last simple">
<li>Configuration Handling <a class="reference external" href="https://tedboy.github.io/flask/flask_doc.config.html">https://tedboy.github.io/flask/flask_doc.config.html</a></li>
<li>Useful functions and classes <a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html">https://tedboy.github.io/flask/interface_api.useful_funcs.html</a></li>
</ul>
</div>
<div class="section" id="useful-functions-and-classes">
<h2><a class="toc-backref" href="#id2">4.1 Useful functions and classes</a><a class="headerlink" href="#useful-functions-and-classes" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html">https://tedboy.github.io/flask/interface_api.useful_funcs.html</a></p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.current_app</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.current_app">link</a>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.has_request_context()</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.has_request_context">link</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">remote_addr</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="k">if</span> <span class="n">remote_addr</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">has_request_context</span><span class="p">():</span>
            <span class="n">remote_addr</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">remote_addr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remote_addr</span> <span class="o">=</span> <span class="n">remote_addr</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.copy_current_request_context(f)</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.copy_current_request_context">link</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gevent</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">copy_current_request_context</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="nd">@copy_current_request_context</span>
    <span class="k">def</span> <span class="nf">do_some_work</span><span class="p">():</span>
        <span class="c1"># do some work here, it can access flask.request like you</span>
        <span class="c1"># would otherwise in the view function.</span>
        <span class="o">...</span>
    <span class="n">gevent</span><span class="o">.</span><span class="n">spawn</span><span class="p">(</span><span class="n">do_some_work</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;Regular response&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.has_app_context()</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.has_app_context">link</a>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.url_for(endpoint,</span> <span class="pre">**values)</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.url_for">link</a>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.abort(code)</span></code> &#8212; <code class="docutils literal"><span class="pre">abort(404)</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.abort">link</a>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.redirect(location,</span> <span class="pre">code=302,</span> <span class="pre">Response=None)</span></code> &#8212; (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.redirect">link</a>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.g</span></code> (<strong>application globals</strong>) (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.app_globals.html">link</a>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.make_response(*args)</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.make_response">link</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
    <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Parachutes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;parachutes are cool&#39;</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.after_this_request(f)</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.after_this_request">link</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="nd">@after_this_request</span>
    <span class="k">def</span> <span class="nf">add_header</span><span class="p">(</span><span class="n">response</span><span class="p">):</span>
        <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Parachute&#39;</span>
        <span class="k">return</span> <span class="n">response</span>
    <span class="k">return</span> <span class="s1">&#39;Hello World!&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.send_file(...)</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.send_file">link</a>)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.send_from_directory(directory,</span> <span class="pre">filename,</span> <span class="pre">**options)</span></code> (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.send_from_directory">link</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/uploads/&lt;path:filename&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">download_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">send_from_directory</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;UPLOAD_FOLDER&#39;</span><span class="p">],</span>
                               <span class="n">filename</span><span class="p">,</span> <span class="n">as_attachment</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">flask.safe_join(directory,</span> <span class="pre">filename)</span></code> safely join directory and filename (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.safe_join">link</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/wiki/&lt;path:filename&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">wiki_page</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">safe_join</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;WIKI_FOLDER&#39;</span><span class="p">],</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">fd</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>  <span class="c1"># Read and process the file content...</span>
</pre></div>
</div>
</li>
<li><p class="first">flask.escape(s) (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.escape">link</a>)</p>
</li>
<li><p class="first">class flask.Markup (<a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.Markup">link</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;Hello &lt;em&gt;World&lt;/em&gt;!&quot;</span><span class="p">)</span>
<span class="go">Markup(u&#39;Hello &lt;em&gt;World&lt;/em&gt;!&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span> <span class="k">def</span> <span class="nf">__html__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="s1">&#39;&lt;a href=&quot;#&quot;&gt;foo&lt;/a&gt;&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="n">Foo</span><span class="p">())</span>
<span class="go">Markup(u&#39;&lt;a href=&quot;#&quot;&gt;foo&lt;/a&gt;&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="s2">&quot;Hello &lt;em&gt;World&lt;/em&gt;!&quot;</span><span class="p">)</span>
<span class="go">Markup(u&#39;Hello &amp;lt;em&amp;gt;World&amp;lt;/em&amp;gt;!&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">em</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;</span><span class="si">%s</span><span class="s2">&lt;/em&gt;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">em</span> <span class="o">%</span> <span class="s2">&quot;foo &amp; bar&quot;</span>
<span class="go">Markup(u&#39;&lt;em&gt;foo &amp;amp; bar&lt;/em&gt;&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">strong</span> <span class="o">=</span> <span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;&lt;strong&gt;</span><span class="si">%(text)s</span><span class="s2">&lt;/strong&gt;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">strong</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;blink&gt;hacker here&lt;/blink&gt;&#39;</span><span class="p">}</span>
<span class="go">Markup(u&#39;&lt;strong&gt;&amp;lt;blink&amp;gt;hacker here&amp;lt;/blink&amp;gt;&lt;/strong&gt;&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;&lt;em&gt;Hello&lt;/em&gt; &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;foo&gt;&quot;</span>
<span class="go">Markup(u&#39;&lt;em&gt;Hello&lt;/em&gt; &amp;lt;foo&amp;gt;&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Markup</span><span class="p">(</span><span class="s2">&quot;Main &amp;raquo;  &lt;em&gt;About&lt;/em&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">striptags</span><span class="p">()</span>
<span class="go">u&#39;Main \xbb About&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="app-flask-object-summary-whirlwind">
<h2><a class="toc-backref" href="#id3">4.2 app (Flask object) summary (whirlwind)</a><a class="headerlink" href="#app-flask-object-summary-whirlwind" title="Permalink to this headline">¶</a></h2>
<div class="section" id="app-context">
<h3>4.2.1 app.context<a class="headerlink" href="#app-context" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># ===</span>
<span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
    <span class="c1"># within this block, current_app points to app.</span>
    <span class="k">print</span> <span class="n">current_app</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
<div class="section" id="app-teardown-appcontext">
<h3>4.2.2 app.teardown_appcontext<a class="headerlink" href="#app-teardown-appcontext" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app.teardown_appcontext</span>
<span class="k">def</span> <span class="nf">teardown_db</span><span class="p">(</span><span class="n">exception</span><span class="p">):</span>
    <span class="n">db</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;_database&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">db</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="app-config">
<h3>4.2.3 app.config<a class="headerlink" href="#app-config" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tedboy.github.io/flask/flask_doc.config.html">https://tedboy.github.io/flask/flask_doc.config.html</a></p>
<p>To update multiple keys at once you can use the <code class="docutils literal"><span class="pre">dict.update()</span></code> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># === touch app.config stuff ===</span>
<span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;USERNAME&#39;</span><span class="p">]:</span>
    <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Invalid username&#39;</span>

<span class="c1"># === config update with dict style method</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">DEBUG</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">SECRET_KEY</span><span class="o">=</span><span class="s1">&#39;...&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>From External file <a class="reference external" href="https://tedboy.github.io/flask/interface_api.configuration.html">https://tedboy.github.io/flask/interface_api.configuration.html</a></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_pyfile</span><span class="p">(</span><span class="s1">&#39;yourconfig.cfg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or using <code class="docutils literal"><span class="pre">from_object</span></code> (in bash, do <code class="docutils literal"><span class="pre">export</span> <span class="pre">YOURAPPLICATION_SETTINGS='/path/to/config/file'</span></code>)</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DEBUG</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;development key&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="app-route-with-variables">
<h3>4.2.4 app.route with variables<a class="headerlink" href="#app-route-with-variables" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># === routing with variables ===</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/user/&lt;username&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_user_profile</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="c1"># show the user profile for that user</span>
    <span class="k">return</span> <span class="s1">&#39;User </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">username</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/post/&lt;int:post_id&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_post</span><span class="p">(</span><span class="n">post_id</span><span class="p">):</span>
    <span class="c1"># show the post with the given id, the id is an integer</span>
    <span class="k">return</span> <span class="s1">&#39;Post </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">post_id</span>
</pre></div>
</div>
</div>
<div class="section" id="app-route-with-request-object">
<h3>4.2.5 app.route with request object<a class="headerlink" href="#app-route-with-request-object" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># === routing with request object ===</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">do_the_login</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">show_the_login_form</span><span class="p">()</span>

<span class="c1"># == another example ===</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">error</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">valid_login</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
                       <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]):</span>
            <span class="k">return</span> <span class="n">log_the_user_in</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Invalid username/password&#39;</span>
    <span class="c1"># the code below is executed if the request method</span>
    <span class="c1"># was GET or the credentials were invalid</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;login.html&#39;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">)</span>

<span class="c1"># === file upload example ===</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload_file</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;the_file&#39;</span><span class="p">]</span>
        <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;/var/www/uploads/uploaded_file.txt&#39;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="app-test-request-context">
<h3>4.2.6 app.test_request_context<a class="headerlink" href="#app-test-request-context" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># === url_for and test_requeset_context</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">url_for</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span> <span class="k">pass</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span> <span class="k">pass</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/user/&lt;username&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">profile</span><span class="p">(</span><span class="n">username</span><span class="p">):</span> <span class="k">pass</span>

<span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">test_request_context</span><span class="p">():</span>
   <span class="k">print</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
   <span class="k">print</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">)</span>
   <span class="k">print</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="nb">next</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
   <span class="k">print</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span><span class="p">)</span>
   <span class="c1">#/</span>
   <span class="c1">#/login</span>
   <span class="c1">#/login?next=/</span>
   <span class="c1">#/user/John%20Doe</span>
</pre></div>
</div>
</div>
<div class="section" id="app-errorhandler">
<h3>4.2.7 app.errorhandler<a class="headerlink" href="#app-errorhandler" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># ===== error handling =====</span>
<span class="c1"># image we have a view like this</span>
<span class="nd">@app.errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;error.html&#39;</span><span class="p">),</span> <span class="mi">404</span>

<span class="c1"># You just need to wrap the return expression with flask.make_response</span>
<span class="c1"># and get the object to modify it, then return it</span>
<span class="nd">@app.errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;error.html&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">)</span>
    <span class="n">resp</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Something&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;A value&#39;</span>
    <span class="k">return</span> <span class="n">resp</span>

<span class="c1"># === redirect and errors ===</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">abort</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">))</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">abort</span><span class="p">(</span><span class="mi">401</span><span class="p">)</span> <span class="c1"># 401 means access denied</span>
    <span class="n">this_is_never_executed</span><span class="p">()</span>

<span class="c1"># === custom error page ===</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>

<span class="nd">@app.errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span> <span class="c1"># 404 means not found</span>
<span class="k">def</span> <span class="nf">page_not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="c1">#  the 404 after the render_template() tells Flask that the status code of that page should be 404</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;page_not_found.html&#39;</span><span class="p">),</span> <span class="mi">404</span>
</pre></div>
</div>
</div>
<div class="section" id="app-template-filter-custom-filter">
<h3>4.2.8 app.template_filter (custom filter)<a class="headerlink" href="#app-template-filter-custom-filter" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># ==== register filter =====</span>
<span class="nd">@app.template_filter</span><span class="p">(</span><span class="s1">&#39;reverse&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">reverse_filter</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">reverse_filter</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">app</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s1">&#39;reverse&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">reverse_filter</span>
</pre></div>
</div>
<p>Now you can do this in jinja template file</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">x</span> <span class="k">in</span> <span class="nv">mylist</span> <span class="o">|</span> <span class="nf">reverse</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="app-context-processor-make-var-func-accessible-in-any-template">
<h3>4.2.9 app.context_processor (make var/func accessible in any template)<a class="headerlink" href="#app-context-processor-make-var-func-accessible-in-any-template" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># ===== context processor (to have var/func accessible in template) =====</span>
<span class="nd">@app.context_processor</span>
<span class="k">def</span> <span class="nf">utility_processor</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">format_price</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="s1">u&#39;€&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">u&#39;{0:.2f}{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">currency</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">format_price</span><span class="o">=</span><span class="n">format_price</span><span class="p">)</span>
</pre></div>
</div>
<p>Now you can do this in jinja template file</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">format_price</span><span class="o">(</span><span class="m">0.33</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="app-logger-haven-t-used-it-yet">
<h3>4.2.10 app.logger (haven&#8217;t used it yet)<a class="headerlink" href="#app-logger-haven-t-used-it-yet" title="Permalink to this headline">¶</a></h3>
<p><strong>12. Logging</strong> <a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart12.html">https://tedboy.github.io/flask/quickstart/quickstart12.html</a></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;A value for debugging&#39;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;A warning occurred (</span><span class="si">%d</span><span class="s1"> apples)&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;An error occurred&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="standard-context">
<h2><a class="toc-backref" href="#id4">4.3 Standard Context</a><a class="headerlink" href="#standard-context" title="Permalink to this headline">¶</a></h2>
<p>The following global variables are available within Jinja2 templates
by default:</p>
<dl class="data">
<dt>
<code class="descname">config</code></dt>
<dd><p>The current configuration object (<code class="xref py py-data docutils literal"><span class="pre">flask.config</span></code>)</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.6.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.10: </span>This is now always available, even in imported templates.</p>
</div>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">request</code></dt>
<dd><p>The current request object (<code class="xref py py-class docutils literal"><span class="pre">flask.request</span></code>).  This variable is
unavailable if the template was rendered without an active request
context.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">session</code></dt>
<dd><p>The current session object (<code class="xref py py-class docutils literal"><span class="pre">flask.session</span></code>).  This variable
is unavailable if the template was rendered without an active request
context.</p>
</dd></dl>

<dl class="data">
<dt>
<code class="descname">g</code></dt>
<dd><p>The request-bound object for global variables (<code class="xref py py-data docutils literal"><span class="pre">flask.g</span></code>).  This
variable is unavailable if the template was rendered without an active
request context.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">url_for</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>The <code class="xref py py-func docutils literal"><span class="pre">flask.url_for()</span></code> function.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">get_flashed_messages</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>The <code class="xref py py-func docutils literal"><span class="pre">flask.get_flashed_messages()</span></code> function.</p>
</dd></dl>

<div class="admonition-the-jinja-context-behavior admonition">
<p class="first admonition-title">The Jinja Context Behavior</p>
<p>These variables are added to the context of variables, they are not
global variables.  The difference is that by default these will not
show up in the context of imported templates.  This is partially caused
by performance considerations, partially to keep things explicit.</p>
<p>What does this mean for you?  If you have a macro you want to import,
that needs to access the request object you have two possibilities:</p>
<ol class="arabic simple">
<li>you explicitly pass the request to the macro as parameter, or
the attribute of the request object you are interested in.</li>
<li>you import the macro &#8220;with context&#8221;.</li>
</ol>
<p>Importing with context looks like this:</p>
<div class="last highlight-jinja"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">from</span> <span class="s1">&#39;_helpers.html&#39;</span> <span class="k">import</span> <span class="nv">my_macro</span> <span class="k">with context</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="application-context-to-cache-resource-like-database-connections">
<h2><a class="toc-backref" href="#id5">4.4 Application context (to cache resource, like database connections)</a><a class="headerlink" href="#application-context-to-cache-resource-like-database-connections" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://tedboy.github.io/flask/flask_doc.appcontext.html">https://tedboy.github.io/flask/flask_doc.appcontext.html</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Using <code class="docutils literal"><span class="pre">g</span></code> raises an error saying
&#8220;working outside of application context&#8221;</p>
<p class="last"><a class="reference external" href="http://stackoverflow.com/questions/31444036/runtimeerror-working-outside-of-application-context">http://stackoverflow.com/questions/31444036/runtimeerror-working-outside-of-application-context</a></p>
</div>
<div class="admonition-purpose-of-application-context admonition">
<p class="first admonition-title">Purpose of <strong>application context</strong></p>
<p class="last"><a class="reference external" href="https://tedboy.github.io/flask/flask_doc.appcontext.html#purpose-of-the-application-context">https://tedboy.github.io/flask/flask_doc.appcontext.html#purpose-of-the-application-context</a></p>
</div>
<div class="admonition-creating-app-context admonition">
<p class="first admonition-title">Creating app-context</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">current_app</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
    <span class="c1"># within this block, current_app points to app.</span>
    <span class="k">print</span> <span class="n">current_app</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
<div class="section" id="context-usage-database-connections">
<h3>4.4.1 Context Usage (<strong>Database connections</strong>)<a class="headerlink" href="#context-usage-database-connections" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tedboy.github.io/flask/flask_doc.appcontext.html#context-usage">https://tedboy.github.io/flask/flask_doc.appcontext.html#context-usage</a></p>
<p>The context is typically used to cache resources that need to be created
on a per-request or usage case.  For instance, database connections are
destined to go there.  When storing things on the application context
unique names should be chosen as this is a place that is shared between
Flask applications and extensions.</p>
<p>The most common usage is to split resource management into two parts:</p>
<ol class="arabic simple">
<li>an implicit resource caching on the context.</li>
<li>a context teardown based resource deallocation.</li>
</ol>
<p>Generally there would be a <code class="docutils literal"><span class="pre">get_X()</span></code> function that creates resource
<code class="docutils literal"><span class="pre">X</span></code> if it does not exist yet and otherwise returns the same resource,
and a <code class="docutils literal"><span class="pre">teardown_X()</span></code> function that is registered as teardown handler.</p>
<p>This is an example that connects to a database:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">g</span>

<span class="k">def</span> <span class="nf">get_db</span><span class="p">():</span>
    <span class="n">db</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;_database&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">db</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">_database</span> <span class="o">=</span> <span class="n">connect_to_database</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">db</span>

<span class="nd">@app.teardown_appcontext</span>
<span class="k">def</span> <span class="nf">teardown_db</span><span class="p">(</span><span class="n">exception</span><span class="p">):</span>
    <span class="n">db</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="s1">&#39;_database&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">db</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The first time <code class="docutils literal"><span class="pre">get_db()</span></code> is called the connection will be established.
To make this implicit a <code class="xref py py-class docutils literal"><span class="pre">LocalProxy</span></code> can be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">werkzeug.local</span> <span class="kn">import</span> <span class="n">LocalProxy</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">LocalProxy</span><span class="p">(</span><span class="n">get_db</span><span class="p">)</span>
</pre></div>
</div>
<p>That way a user can directly access <code class="docutils literal"><span class="pre">db</span></code> which internally calls
<code class="docutils literal"><span class="pre">get_db()</span></code>.</p>
</div>
</div>
<div class="section" id="configuration-handling">
<h2><a class="toc-backref" href="#id6">4.5 Configuration Handling</a><a class="headerlink" href="#configuration-handling" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://tedboy.github.io/flask/flask_doc.config.html">https://tedboy.github.io/flask/flask_doc.config.html</a></li>
<li><a class="reference external" href="https://tedboy.github.io/flask/interface_api.configuration.html">https://tedboy.github.io/flask/interface_api.configuration.html</a></li>
</ul>
<p><strong>Works like a dict</strong></p>
<div class="section" id="config-from-external-file">
<h3>4.5.1 Config from external file<a class="headerlink" href="#config-from-external-file" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://tedboy.github.io/flask/flask_doc.config.html#configuring-from-files">https://tedboy.github.io/flask/flask_doc.config.html#configuring-from-files</a></li>
<li><a class="reference external" href="https://tedboy.github.io/flask/interface_api.configuration.html">https://tedboy.github.io/flask/interface_api.configuration.html</a></li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_pyfile</span><span class="p">(</span><span class="s1">&#39;yourconfig.cfg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or using <code class="docutils literal"><span class="pre">from_object</span></code></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DEBUG</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s1">&#39;development key&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">from_object</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="builtin-configuration-values">
<h3>4.5.2 Builtin Configuration Values<a class="headerlink" href="#builtin-configuration-values" title="Permalink to this headline">¶</a></h3>
<p>The following configuration values are used internally by Flask:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">DEBUG</span></code></td>
<td>enable/disable debug mode</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">TESTING</span></code></td>
<td>enable/disable testing mode</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">PROPAGATE_EXCEPTIONS</span></code></td>
<td>explicitly enable or disable the
propagation of exceptions.  If not set or
explicitly set to <code class="docutils literal"><span class="pre">None</span></code> this is
implicitly true if either <code class="docutils literal"><span class="pre">TESTING</span></code> or
<code class="docutils literal"><span class="pre">DEBUG</span></code> is true.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">PRESERVE_CONTEXT_ON_EXCEPTION</span></code></td>
<td>By default if the application is in
debug mode the request context is not
popped on exceptions to enable debuggers
to introspect the data.  This can be
disabled by this key.  You can also use
this setting to force-enable it for non
debug execution which might be useful to
debug production applications (but also
very risky).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">SECRET_KEY</span></code></td>
<td>the secret key</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">SESSION_COOKIE_NAME</span></code></td>
<td>the name of the session cookie</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">SESSION_COOKIE_DOMAIN</span></code></td>
<td>the domain for the session cookie.  If
this is not set, the cookie will be
valid for all subdomains of
<code class="docutils literal"><span class="pre">SERVER_NAME</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">SESSION_COOKIE_PATH</span></code></td>
<td>the path for the session cookie.  If
this is not set the cookie will be valid
for all of <code class="docutils literal"><span class="pre">APPLICATION_ROOT</span></code> or if
that is not set for <code class="docutils literal"><span class="pre">'/'</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">SESSION_COOKIE_HTTPONLY</span></code></td>
<td>controls if the cookie should be set
with the httponly flag.  Defaults to
<code class="docutils literal"><span class="pre">True</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">SESSION_COOKIE_SECURE</span></code></td>
<td>controls if the cookie should be set
with the secure flag.  Defaults to
<code class="docutils literal"><span class="pre">False</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">PERMANENT_SESSION_LIFETIME</span></code></td>
<td>the lifetime of a permanent session as
<code class="xref py py-class docutils literal"><span class="pre">datetime.timedelta</span></code> object.
Starting with Flask 0.8 this can also be
an integer representing seconds.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">SESSION_REFRESH_EACH_REQUEST</span></code></td>
<td>this flag controls how permanent
sessions are refreshed.  If set to <code class="docutils literal"><span class="pre">True</span></code>
(which is the default) then the cookie
is refreshed each request which
automatically bumps the lifetime.  If
set to <code class="docutils literal"><span class="pre">False</span></code> a <cite>set-cookie</cite> header is
only sent if the session is modified.
Non permanent sessions are not affected
by this.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">USE_X_SENDFILE</span></code></td>
<td>enable/disable x-sendfile</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">LOGGER_NAME</span></code></td>
<td>the name of the logger</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">LOGGER_HANDLER_POLICY</span></code></td>
<td>the policy of the default logging
handler.  The default is <code class="docutils literal"><span class="pre">'always'</span></code>
which means that the default logging
handler is always active.  <code class="docutils literal"><span class="pre">'debug'</span></code>
will only activate logging in debug
mode, <code class="docutils literal"><span class="pre">'production'</span></code> will only log in
production and <code class="docutils literal"><span class="pre">'never'</span></code> disables it
entirely.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">SERVER_NAME</span></code></td>
<td>the name and port number of the server.
Required for subdomain support (e.g.:
<code class="docutils literal"><span class="pre">'myapp.dev:5000'</span></code>)  Note that
localhost does not support subdomains so
setting this to “localhost” does not
help.  Setting a <code class="docutils literal"><span class="pre">SERVER_NAME</span></code> also
by default enables URL generation
without a request context but with an
application context.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">APPLICATION_ROOT</span></code></td>
<td>If the application does not occupy
a whole domain or subdomain this can
be set to the path where the application
is configured to live.  This is for
session cookie as path value.  If
domains are used, this should be
<code class="docutils literal"><span class="pre">None</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">MAX_CONTENT_LENGTH</span></code></td>
<td>If set to a value in bytes, Flask will
reject incoming requests with a
content length greater than this by
returning a 413 status code.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">SEND_FILE_MAX_AGE_DEFAULT</span></code></td>
<td>Default cache control max age to use with
<code class="xref py py-meth docutils literal"><span class="pre">send_static_file()</span></code> (the
default static file handler) and
<code class="xref py py-func docutils literal"><span class="pre">send_file()</span></code>, as
<code class="xref py py-class docutils literal"><span class="pre">datetime.timedelta</span></code> or as seconds.
Override this value on a per-file
basis using the
<code class="xref py py-meth docutils literal"><span class="pre">get_send_file_max_age()</span></code>
hook on <code class="xref py py-class docutils literal"><span class="pre">Flask</span></code> or
<code class="xref py py-class docutils literal"><span class="pre">Blueprint</span></code>,
respectively. Defaults to 43200 (12 hours).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">TRAP_HTTP_EXCEPTIONS</span></code></td>
<td>If this is set to <code class="docutils literal"><span class="pre">True</span></code> Flask will
not execute the error handlers of HTTP
exceptions but instead treat the
exception like any other and bubble it
through the exception stack.  This is
helpful for hairy debugging situations
where you have to find out where an HTTP
exception is coming from.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">TRAP_BAD_REQUEST_ERRORS</span></code></td>
<td>Werkzeug&#8217;s internal data structures that
deal with request specific data will
raise special key errors that are also
bad request exceptions.  Likewise many
operations can implicitly fail with a
BadRequest exception for consistency.
Since it&#8217;s nice for debugging to know
why exactly it failed this flag can be
used to debug those situations.  If this
config is set to <code class="docutils literal"><span class="pre">True</span></code> you will get
a regular traceback instead.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">PREFERRED_URL_SCHEME</span></code></td>
<td>The URL scheme that should be used for
URL generation if no URL scheme is
available.  This defaults to <code class="docutils literal"><span class="pre">http</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">JSON_AS_ASCII</span></code></td>
<td>By default Flask serialize object to
ascii-encoded JSON.  If this is set to
<code class="docutils literal"><span class="pre">False</span></code> Flask will not encode to ASCII
and output strings as-is and return
unicode strings.  <code class="docutils literal"><span class="pre">jsonify</span></code> will
automatically encode it in <code class="docutils literal"><span class="pre">utf-8</span></code>
then for transport for instance.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">JSON_SORT_KEYS</span></code></td>
<td>By default Flask will serialize JSON
objects in a way that the keys are
ordered.  This is done in order to
ensure that independent of the hash seed
of the dictionary the return value will
be consistent to not trash external HTTP
caches.  You can override the default
behavior by changing this variable.
This is not recommended but might give
you a performance improvement on the
cost of cachability.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">JSONIFY_PRETTYPRINT_REGULAR</span></code></td>
<td>If this is set to <code class="docutils literal"><span class="pre">True</span></code> (the default)
jsonify responses will be pretty printed
if they are not requested by an
XMLHttpRequest object (controlled by
the <code class="docutils literal"><span class="pre">X-Requested-With</span></code> header)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">JSONIFY_MIMETYPE</span></code></td>
<td>MIME type used for jsonify responses.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">TEMPLATES_AUTO_RELOAD</span></code></td>
<td>Whether to check for modifications of
the template source and reload it
automatically. By default the value is
<code class="docutils literal"><span class="pre">None</span></code> which means that Flask checks
original file only in debug mode.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">EXPLAIN_TEMPLATE_LOADING</span></code></td>
<td>If this is enabled then every attempt to
load a template will write an info
message to the logger explaining the
attempts to locate the template.  This
can be useful to figure out why
templates cannot be found or wrong
templates appear to be loaded.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="request-object">
<h2><a class="toc-backref" href="#id7">4.6 Request object</a><a class="headerlink" href="#request-object" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://tedboy.github.io/flask/interface_api.incoming_request_data.html">https://tedboy.github.io/flask/interface_api.incoming_request_data.html</a></li>
<li><a class="reference external" href="https://tedboy.github.io/flask/generated/generated/flask.Request.html">https://tedboy.github.io/flask/generated/generated/flask.Request.html</a></li>
</ul>
<div class="admonition-flask-request admonition">
<p class="first admonition-title"><code class="docutils literal"><span class="pre">flask.request</span></code></p>
<p><a class="reference external" href="https://tedboy.github.io/flask/interface_api.incoming_request_data.html#flask.request">https://tedboy.github.io/flask/interface_api.incoming_request_data.html#flask.request</a></p>
<p>To access incoming request data, you can use the global <code class="docutils literal"><span class="pre">request</span></code> object. Flask parses incoming request data for you and gives you access to it through that global object. Internally Flask makes sure that you always get the correct data for the active thread if you are in a multithreaded environment.</p>
<p class="last">The <code class="docutils literal"><span class="pre">request</span></code> object is an instance of a <code class="docutils literal"><span class="pre">Request</span></code> subclass and provides all of the attributes Werkzeug defines. This just shows a quick overview of the most important ones.</p>
</div>
<div class="section" id="quickstart-4-3-http-methods">
<h3>4.6.1 Quickstart - 4.3 HTTP Methods<a class="headerlink" href="#quickstart-4-3-http-methods" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart4.html#http-methods">https://tedboy.github.io/flask/quickstart/quickstart4.html#http-methods</a></p>
<p>By default, a route only answers to <code class="docutils literal"><span class="pre">GET</span></code> requests, but that can be changed by providing the methods argument to the <code class="docutils literal"><span class="pre">route()</span></code> decorator.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">do_the_login</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">show_the_login_form</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="quickstart-7-accessing-request-data">
<h3>4.6.2 Quickstart - 7. Accessing Request Data<a class="headerlink" href="#quickstart-7-accessing-request-data" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>4.6.2.1 Request object<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart7.html#the-request-object">https://tedboy.github.io/flask/quickstart/quickstart7.html#the-request-object</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For web applications it&#8217;s crucial to react to the data a client sends to the server. In Flask this information is provided by the global request object.</p>
</div>
<p><a class="reference external" href="https://github.com/pallets/flask/blob/master/examples/flaskr/flaskr/flaskr.py">https://github.com/pallets/flask/blob/master/examples/flaskr/flaskr/flaskr.py</a></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>

<span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;USERNAME&#39;</span><span class="p">]:</span>
    <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Invalid username&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">method</span></code> and <code class="docutils literal"><span class="pre">form</span></code> attribute</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">method</span></code> = current request method</li>
<li><code class="docutils literal"><span class="pre">form</span></code> = form data (data transmitted in a <code class="docutils literal"><span class="pre">POST</span></code> or <code class="docutils literal"><span class="pre">PUT</span></code> request)</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">error</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">valid_login</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
                       <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]):</span>
            <span class="k">return</span> <span class="n">log_the_user_in</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="s1">&#39;Invalid username/password&#39;</span>
    <span class="c1"># the code below is executed if the request method</span>
    <span class="c1"># was GET or the credentials were invalid</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;login.html&#39;</span><span class="p">,</span> <span class="n">error</span><span class="o">=</span><span class="n">error</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="file-uploads">
<h4>4.6.2.2 File uploads<a class="headerlink" href="#file-uploads" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart7.html#file-uploads">https://tedboy.github.io/flask/quickstart/quickstart7.html#file-uploads</a></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/upload&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload_file</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="s1">&#39;the_file&#39;</span><span class="p">]</span>
        <span class="n">f</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;/var/www/uploads/uploaded_file.txt&#39;</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="cookies">
<h4>4.6.2.3 Cookies<a class="headerlink" href="#cookies" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart7.html#cookies">https://tedboy.github.io/flask/quickstart/quickstart7.html#cookies</a></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># === reading cookies ===</span>
<span class="c1"># The cookies attribute of request objects is a dictionary with all</span>
<span class="c1"># the cookies the client transmits</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
    <span class="c1"># use cookies.get(key) instead of cookies[key] to not get a</span>
    <span class="c1"># KeyError if the cookie is missing.</span>

<span class="c1"># === storing cookies ===</span>
<span class="c1"># use the ``set_cookie`` method of response objects</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">make_response</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">render_template</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
    <span class="n">resp</span><span class="o">.</span><span class="n">set_cookie</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;the username&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resp</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="response-object">
<h2><a class="toc-backref" href="#id8">4.7 Response object</a><a class="headerlink" href="#response-object" title="Permalink to this headline">¶</a></h2>
<div class="admonition-flask-response admonition">
<p class="first admonition-title">flask.Response</p>
<p><code class="docutils literal"><span class="pre">flask.Response(response=None,</span> <span class="pre">status=None,</span> <span class="pre">headers=None,</span> <span class="pre">mimetype=None,</span> <span class="pre">content_type=None,</span> <span class="pre">direct_passthrough=False)</span></code></p>
<p><a class="reference external" href="http://flask.pocoo.org/docs/0.11/api/#response-objects">http://flask.pocoo.org/docs/0.11/api/#response-objects</a></p>
<p class="last">The response object that is used by default in Flask. Works like the response object from Werkzeug but is set to have an HTML mimetype by default. Quite often you don’t have to create this object yourself because make_response() will take care of that for you.</p>
</div>
<div class="section" id="quick-start-9-about-responses">
<h3>4.7.1 Quick start 9. About Responses<a class="headerlink" href="#quick-start-9-about-responses" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart9.html">https://tedboy.github.io/flask/quickstart/quickstart9.html</a></p>
<p><a class="reference external" href="https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.make_response">https://tedboy.github.io/flask/interface_api.useful_funcs.html#flask.make_response</a></p>
<ul class="simple">
<li>The return value from a <strong>view function</strong> is automatically converted into a <strong>response object</strong> for you.</li>
<li>If the return value is a string it&#8217;s converted into a response object with the string as response body, a <code class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></code> status code and a <strong>text/html mimetype</strong>.</li>
</ul>
<p>The logic that Flask applies to converting return values into response objects is as follows:</p>
<ol class="arabic simple">
<li>If a <strong>response object of the correct type is returned</strong> it&#8217;s directly
returned from the view.</li>
<li><strong>If it&#8217;s a string</strong>, a response object is created with that data and the
default parameters.</li>
<li><strong>If a tuple is returned</strong> the items in the tuple can provide extra
information.  Such tuples have to be in the form <code class="docutils literal"><span class="pre">(response,</span> <span class="pre">status,</span>
<span class="pre">headers)</span></code> or <code class="docutils literal"><span class="pre">(response,</span> <span class="pre">headers)</span></code> where at least one item has
to be in the tuple.  The <code class="docutils literal"><span class="pre">status</span></code> value will override the status code
and <code class="docutils literal"><span class="pre">headers</span></code> can be a list or dictionary of additional header values.</li>
<li><strong>If none of that works</strong>, Flask will assume the return value is a
valid WSGI application and convert that into a response object.</li>
</ol>
<p>If you want to get hold of the resulting response object inside the view
you can use the <code class="xref py py-func docutils literal"><span class="pre">make_response()</span></code> function.</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>Imagine you have a view like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app.errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;error.html&#39;</span><span class="p">),</span> <span class="mi">404</span>
</pre></div>
</div>
<p>You just need to wrap the return expression with
<code class="xref py py-func docutils literal"><span class="pre">make_response()</span></code> and get the response object to modify it, then
return it:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app.errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">make_response</span><span class="p">(</span><span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;error.html&#39;</span><span class="p">),</span> <span class="mi">404</span><span class="p">)</span>
    <span class="n">resp</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-Something&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;A value&#39;</span>
    <span class="k">return</span> <span class="n">resp</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="session-object">
<h2><a class="toc-backref" href="#id9">4.8 Session object</a><a class="headerlink" href="#session-object" title="Permalink to this headline">¶</a></h2>
<p>To access the current session you can use the session object:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">class</span> <span class="pre">flask.session</span></code></dt>
<dd>The session object works pretty much like an ordinary dict, with the difference that it keeps track on modifications.</dd>
</dl>
<div class="section" id="flask-api">
<h3>4.8.1 flask api<a class="headerlink" href="#flask-api" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://flask.pocoo.org/docs/0.11/api/#sessions">http://flask.pocoo.org/docs/0.11/api/#sessions</a></p>
<p>If you have the <code class="docutils literal"><span class="pre">Flask.secret_key</span></code> set you can use <strong>sessions</strong> in Flask applications. A <strong>session</strong> basically makes it possible to remember information from one request to another.</p>
<p>The way Flask does this is by using a signed cookie. So the user can look at the session contents, but not modify it unless they know the secret key, so make sure to set that to something complex and unguessable.</p>
</div>
<div class="section" id="quickstart-10-sessions">
<h3>4.8.2 Quickstart 10. Sessions<a class="headerlink" href="#quickstart-10-sessions" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart10.html">https://tedboy.github.io/flask/quickstart/quickstart10.html</a></p>
<p><code class="docutils literal"><span class="pre">session</span></code> allows you to store information specific to a user from one request to the next. This is implemented on top of cookies for you and signs the cookies cryptographically.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">In order to use sessions you have to set a <strong>secret key</strong></p>
</div>
<p>Here is how sessions work:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">session</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span><span class="p">,</span> <span class="n">escape</span><span class="p">,</span> <span class="n">request</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">if</span> <span class="s1">&#39;username&#39;</span> <span class="ow">in</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Logged in as </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">escape</span><span class="p">(</span><span class="n">session</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span>
    <span class="k">return</span> <span class="s1">&#39;You are not logged in&#39;</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span>
        <span class="n">session</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        &lt;form method=&quot;post&quot;&gt;</span>
<span class="s1">            &lt;p&gt;&lt;input type=text name=username&gt;</span>
<span class="s1">            &lt;p&gt;&lt;input type=submit value=Login&gt;</span>
<span class="s1">        &lt;/form&gt;</span>
<span class="s1">    &#39;&#39;&#39;</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/logout&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">logout</span><span class="p">():</span>
    <span class="c1"># remove the username from the session if it&#39;s there</span>
    <span class="n">session</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">))</span>

<span class="c1"># set the secret key.  keep this really secret:</span>
<span class="n">app</span><span class="o">.</span><span class="n">secret_key</span> <span class="o">=</span> <span class="s1">&#39;A0Zr98j/3yX R~XHH!jmN]LWX/,?RT&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-generate-good-secret-keys">
<h3>4.8.3 How to generate good secret keys<a class="headerlink" href="#how-to-generate-good-secret-keys" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>How to generate good secret keys</strong></p>
<p>The problem with random is that it&#8217;s hard to judge what is truly random.  And
a secret key should be as random as possible.  Your operating system
has ways to generate pretty random stuff based on a cryptographic
random generator which can be used to get such a key:</p>
<div class="last highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">urandom</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<span class="go">&#39;\xfd{H\xe5&lt;\x95\xf9\xe3\x96.5\xd1\x01O&lt;!\xd5\xa2\xa0\x9fR&quot;\xa1\xa8&#39;</span>

<span class="go">Just take that thing and copy/paste it into your code and you&#39;re done.</span>
</pre></div>
</div>
</div>
<p>A note on cookie-based sessions: Flask will take the values you put into the
session object and serialize them into a cookie.  If you are finding some
values do not persist across requests, cookies are indeed enabled, and you are
not getting a clear error message, check the size of the cookie in your page
responses compared to the size supported by web browsers.</p>
</div>
</div>
<div class="section" id="refresher-on-http-methods">
<h2><a class="toc-backref" href="#id10">4.9 Refresher on HTTP Methods</a><a class="headerlink" href="#refresher-on-http-methods" title="Permalink to this headline">¶</a></h2>
<p>(<strong>From Flask Doc-page</strong>)</p>
<p>The HTTP method (also often called &#8220;the verb&#8221;) tells the server what the
client wants to <em>do</em> with the requested page.  The following methods are
very common:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">GET</span></code></dt>
<dd>The browser tells the server to just <em>get</em> the information stored on
that page and send it.  This is probably the most common method.</dd>
<dt><code class="docutils literal"><span class="pre">HEAD</span></code></dt>
<dd>The browser tells the server to get the information, but it is only
interested in the <em>headers</em>, not the content of the page.  An
application is supposed to handle that as if a <code class="docutils literal"><span class="pre">GET</span></code> request was
received but to not deliver the actual content.  In Flask you don&#8217;t
have to deal with that at all, the underlying Werkzeug library handles
that for you.</dd>
<dt><code class="docutils literal"><span class="pre">POST</span></code></dt>
<dd>The browser tells the server that it wants to <em>post</em> some new
information to that URL and that the server must ensure the data is
stored and only stored once.  This is how HTML forms usually
transmit data to the server.</dd>
<dt><code class="docutils literal"><span class="pre">PUT</span></code></dt>
<dd>Similar to <code class="docutils literal"><span class="pre">POST</span></code> but the server might trigger the store procedure
multiple times by overwriting the old values more than once.  Now you
might be asking why this is useful, but there are some good reasons
to do it this way.  Consider that the connection is lost during
transmission: in this situation a system between the browser and the
server might receive the request safely a second time without breaking
things.  With <code class="docutils literal"><span class="pre">POST</span></code> that would not be possible because it must only
be triggered once.</dd>
<dt><code class="docutils literal"><span class="pre">DELETE</span></code></dt>
<dd>Remove the information at the given location.</dd>
<dt><code class="docutils literal"><span class="pre">OPTIONS</span></code></dt>
<dd>Provides a quick way for a client to figure out which methods are
supported by this URL.  Starting with Flask 0.6, this is implemented
for you automatically.</dd>
</dl>
<p>Now the interesting part is that in HTML4 and XHTML1, the only methods a
form can submit to the server are <code class="docutils literal"><span class="pre">GET</span></code> and <code class="docutils literal"><span class="pre">POST</span></code>.  But with JavaScript
and future HTML standards you can use the other methods as well.  Furthermore
HTTP has become quite popular lately and browsers are no longer the only
clients that are using HTTP. For instance, many revision control systems
use it.</p>
</div>
<div class="section" id="using-url-for">
<h2><a class="toc-backref" href="#id11">4.10 Using url_for</a><a class="headerlink" href="#using-url-for" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart4.html#url-building">https://tedboy.github.io/flask/quickstart/quickstart4.html#url-building</a></li>
<li><a class="reference external" href="http://stackoverflow.com/questions/7478366/create-dynamic-urls-in-flask-with-url-for">http://stackoverflow.com/questions/7478366/create-dynamic-urls-in-flask-with-url-for</a></li>
</ul>
<p><code class="docutils literal"><span class="pre">url_for('add',</span> <span class="pre">variable=foo)</span></code>, where we have the definition below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">variable</span><span class="p">):</span> <span class="o">...</span>
</pre></div>
</div>
<p>And in the <strong>template</strong> file, you can do:</p>
<div class="code html highlight-python"><div class="highlight"><pre><span></span>&lt;script src=&quot;{{ url_for(&#39;static&#39;, filename=&#39;jquery.min.js&#39;) }}&quot;&gt;&lt;/script&gt;``
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;name of the function of the route&#39;</span><span class="p">,</span><span class="s1">&#39;parameters (if required)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">test_request_context()</span></code> tells Flask to behave as though it is handling a request, even though we are interacting with it through a Python shell</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">url_for</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span> <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">login</span><span class="p">():</span> <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/user/&lt;username&gt;&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">profile</span><span class="p">(</span><span class="n">username</span><span class="p">):</span> <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">test_request_context</span><span class="p">():</span>
<span class="gp">... </span> <span class="k">print</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="gp">... </span> <span class="k">print</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">)</span>
<span class="gp">... </span> <span class="k">print</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">,</span> <span class="nb">next</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">... </span> <span class="k">print</span> <span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;profile&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;John Doe&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">/</span>
<span class="go">/login</span>
<span class="go">/login?next=/</span>
<span class="go">/user/John%20Doe</span>
</pre></div>
</div>
</div>
<div class="section" id="variable-rules-in-routing-app-route">
<h2><a class="toc-backref" href="#id12">4.11 Variable rules in routing (app.route)</a><a class="headerlink" href="#variable-rules-in-routing-app-route" title="Permalink to this headline">¶</a></h2>
<p><strong>4. Routing</strong> <a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart4.html">https://tedboy.github.io/flask/quickstart/quickstart4.html</a></p>
<p><a class="reference external" href="https://tedboy.github.io/flask/interface_api.url_route_regis.html">https://tedboy.github.io/flask/interface_api.url_route_regis.html</a></p>
<p>The following converters exist:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>string</td>
<td>accepts any text without a slash (the default)</td>
</tr>
<tr class="row-even"><td>int</td>
<td>accepts integers</td>
</tr>
<tr class="row-odd"><td>float</td>
<td>like int but for floating point values</td>
</tr>
<tr class="row-even"><td>path</td>
<td>like the default but also accepts slashes</td>
</tr>
<tr class="row-odd"><td>any</td>
<td>matches one of the items provided</td>
</tr>
<tr class="row-even"><td>uuid</td>
<td>accepts UUID strings</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/user/&lt;username&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_user_profile</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="c1"># show the user profile for that user</span>
    <span class="k">return</span> <span class="s1">&#39;User </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">username</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/post/&lt;int:post_id&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_post</span><span class="p">(</span><span class="n">post_id</span><span class="p">):</span>
    <span class="c1"># show the post with the given id, the id is an integer</span>
    <span class="k">return</span> <span class="s1">&#39;Post </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">post_id</span>
</pre></div>
</div>
</div>
<div class="section" id="redirecting-and-errors">
<h2><a class="toc-backref" href="#id13">4.12 Redirecting and errors</a><a class="headerlink" href="#redirecting-and-errors" title="Permalink to this headline">¶</a></h2>
<p><strong>Redirects and Errors</strong> <a class="reference external" href="https://tedboy.github.io/flask/quickstart/quickstart8.html">https://tedboy.github.io/flask/quickstart/quickstart8.html</a></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">abort</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">url_for</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="n">url_for</span><span class="p">(</span><span class="s1">&#39;login&#39;</span><span class="p">))</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/login&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="n">abort</span><span class="p">(</span><span class="mi">401</span><span class="p">)</span> <span class="c1"># 401 means access denied</span>
    <span class="n">this_is_never_executed</span><span class="p">()</span>
</pre></div>
</div>
<p>Custom error page</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>

<span class="nd">@app.errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span> <span class="c1"># 404 means not found</span>
<span class="k">def</span> <span class="nf">page_not_found</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="c1">#  the 404 after the render_template() tells Flask that the status code of that page should be 404</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;page_not_found.html&#39;</span><span class="p">),</span> <span class="mi">404</span>
</pre></div>
</div>
<div class="section" id="error-handling-not-read-yet">
<h3>4.12.1 Error handling (not read yet)<a class="headerlink" href="#error-handling-not-read-yet" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tedboy.github.io/flask/flask_doc.errorhandling.html">https://tedboy.github.io/flask/flask_doc.errorhandling.html</a></p>
</div>
<div class="section" id="custom-error-page">
<h3>4.12.2 Custom error page<a class="headerlink" href="#custom-error-page" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://tedboy.github.io/flask/patterns/errorpages.html">https://tedboy.github.io/flask/patterns/errorpages.html</a></p>
<p>The following error codes are some that are often displayed to the user,
even if the application behaves correctly:</p>
<dl class="docutils">
<dt><em>404 Not Found</em></dt>
<dd>The good old &#8220;chap, you made a mistake typing that URL&#8221; message.  So
common that even novices to the internet know that 404 means: damn,
the thing I was looking for is not there.  It&#8217;s a very good idea to
make sure there is actually something useful on a 404 page, at least a
link back to the index.</dd>
<dt><em>403 Forbidden</em></dt>
<dd>If you have some kind of access control on your website, you will have
to send a 403 code for disallowed resources.  So make sure the user
is not lost when they try to access a forbidden resource.</dd>
<dt><em>410 Gone</em></dt>
<dd>Did you know that there the &#8220;404 Not Found&#8221; has a brother named &#8220;410
Gone&#8221;?  Few people actually implement that, but the idea is that
resources that previously existed and got deleted answer with 410
instead of 404.  If you are not deleting documents permanently from
the database but just mark them as deleted, do the user a favour and
use the 410 code instead and display a message that what they were
looking for was deleted for all eternity.</dd>
<dt><em>500 Internal Server Error</em></dt>
<dd>Usually happens on programming errors or if the server is overloaded.
A terribly good idea is to have a nice page there, because your
application <em>will</em> fail sooner or later (see also:
<span class="xref std std-ref">application-errors</span>).</dd>
</dl>
<p>An error handler is a function, just like a view function, but it is
called when an error happens and is passed that error.  The error is most
likely a <code class="xref py py-exc docutils literal"><span class="pre">HTTPException</span></code>, but in one case it
can be a different error: a handler for internal server errors will be
passed other exception instances as well if they are uncaught.</p>
<p>An error handler is registered with the <code class="xref py py-meth docutils literal"><span class="pre">errorhandler()</span></code>
decorator and the error code of the exception.  Keep in mind that Flask
will <em>not</em> set the error code for you, so make sure to also provide the
HTTP status code when returning a response.</p>
<p>Please note that if you add an error handler for &#8220;500 Internal Server
Error&#8221;, Flask will not trigger it if it&#8217;s running in Debug mode.</p>
<p>Here an example implementation for a &#8220;404 Page Not Found&#8221; exception:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>

<span class="nd">@app.errorhandler</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">page_not_found</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;404.html&#39;</span><span class="p">),</span> <span class="mi">404</span>
</pre></div>
</div>
<p>An example template might be this:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;layout.html&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span>Page Not Found<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span>
  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Page Not Found<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>What you were looking for is just not there.
  <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">url_for</span><span class="o">(</span><span class="s1">&#39;index&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>go somewhere nice<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="json-stuffs">
<h2><a class="toc-backref" href="#id14">4.13 json stuffs</a><a class="headerlink" href="#json-stuffs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://tedboy.github.io/flask/interface_api.json_support.html">https://tedboy.github.io/flask/interface_api.json_support.html</a></li>
</ul>
<dl class="function">
<dt>
<code class="descname">tojson</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>This function converts the given object into JSON representation.  This
is for example very helpful if you try to generate JavaScript on the
fly.</p>
<p>Note that inside <code class="docutils literal"><span class="pre">script</span></code> tags no escaping must take place, so make
sure to disable escaping with <code class="docutils literal"><span class="pre">|safe</span></code> before Flask 0.10 if you intend
to use it inside <code class="docutils literal"><span class="pre">script</span></code> tags:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">text/javascript</span><span class="p">&gt;</span>
    <span class="nx">doSomethingWith</span><span class="p">(</span><span class="cp">{{</span> <span class="nv">user.username</span><span class="o">|</span><span class="nf">tojson</span><span class="o">|</span><span class="nf">safe</span> <span class="cp">}}</span><span class="p">);</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</dd></dl>

<div class="section" id="flask-jsonify">
<h3>4.13.1 flask.jsonify<a class="headerlink" href="#flask-jsonify" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="https://tedboy.github.io/flask/generated/flask.jsonify.html">https://tedboy.github.io/flask/generated/flask.jsonify.html</a></li>
<li><a class="reference external" href="https://tedboy.github.io/flask/interface_api.json_support.html#flask.json.jsonify">https://tedboy.github.io/flask/interface_api.json_support.html#flask.json.jsonify</a></li>
</ul>
<p>Example usage</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">jsonify</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/_get_current_user&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_current_user</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                   <span class="n">email</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                   <span class="nb">id</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>
</div>
<p>This will send a JSON response like this to the browser:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;admin@localhost&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">42</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cs-jinja.html" class="btn btn-neutral float-right" title="5 jinja notes and snippets (cs-jinja)" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cs-plotly.html" class="btn btn-neutral" title="3 Plotly snippets (cs-plotly)" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      Last updated on Oct 27, 2016.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>